import 'dart:convert';

import 'package:dio/dio.dart';

var options = BaseOptions(
  baseUrl: 'http://127.0.0.1:5000',
);

var dio = Dio(options);

class apiDio {
  Map<String, dynamic> createData(String fileSize, String headerSize) {
    return {
      'file_size': fileSize,
      'header_size': headerSize,
    };
  }

  predict(String fileSize, String headerSize) async {
    try {
      var newData = createData(fileSize, headerSize);

      // Convert the Dart object to JSON
      String dataJson = json.encode(newData);

      Response response = await dio.post('/predict',
          data: dataJson,
          options: Options(
            contentType: Headers.jsonContentType, // Set content type to JSON
          ));

      if (response.statusCode == 200) {
        // The request was successful, you can handle the response here
        print(response.data);
        return response.data;
      } else {
        // Handle errors here
        print('Error: ${response.statusCode}');
      }
    } catch (e) {
      // Handle exceptions here
      print('Exception: $e');
    }
  }
}
